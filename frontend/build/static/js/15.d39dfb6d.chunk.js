(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[15],{132:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return s}));var r,a,c=t(3),o=t(2),i=o.b.a(r||(r=Object(c.a)(["\n     box-shadow: ",";\npadding: 15px 40px;\ncolor:#fff;\nwidth:max-content;\n  background:",';\n  text-transform: uppercase;\n  text-align:center;\n  font-size: 16px;\n  font-family: "Oswald", sans-serif;\n  font-weight:600px;\n line-height:23.5px;\n  cursor:pointer;\n  letter-spacing:2px;\n  border-radius:4px;\n    text-decoration: none;\n\n    transform:\'',"';\n  transition:all 0.5s ease;\n  &:hover{\n    background-color:",";\n  }\n  & > * {\n    cursor:pointer;\n  }\n    @media screen and (max-width: 550px){\n   transform:scale(0.8);\n"])),(function(e){return e.theme.lightBoxShadow}),(function(e){return e.theme.darckYellow}),(function(e){return e.small?"scale(0.7)":"scale(1)"}),(function(e){return e.theme.black})),s=Object(o.b)(i)(a||(a=Object(c.a)(["\n  background:",";\n"])),(function(e){return e.theme.orange}))},148:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var r,a,c,o=t(3),i=t(2),s=t(0),d=i.b.div(r||(r=Object(o.a)(["\n  width: 100%;\n  max-width: 900px;\n  margin: 20px auto 0;\n  background: gray;\n  box-shadow: 1px 1px 5px #00000057;\n  background: #f3f3f3;\n"]))),l=i.b.div(a||(a=Object(o.a)(["\n  width: 100%;\n  height: 60px;\n  background: #ccc;\n  box-shadow: 1px 1px 5px #00000057;\n  border-bottom: 1px solid #ccc;\n"]))),u=i.b.div(c||(c=Object(o.a)(["\nwith:100%;\nheight:50px;\nbackground:white;\nmargin: 1px 0;\nbackground:#fff;\nborder-bottom:1px solid #ccc;\nbox-shadow: 0 1px 3px #ccc;\n\n\n}\n"])));function b(){return Object(s.jsxs)(d,{children:[Object(s.jsx)(l,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{})]})}},149:function(e,n,t){"use strict";n.a=t.p+"static/media/refresh.f1c42ba5.svg"},156:function(e,n,t){"use strict";t.r(n),t.d(n,"TableHead",(function(){return C})),t.d(n,"TableWrapper",(function(){return B})),t.d(n,"OrdersTable",(function(){return N})),t.d(n,"RefreshButton",(function(){return V})),t.d(n,"RefreshIcone",(function(){return U})),t.d(n,"default",(function(){return _}));var r=t(57),a=t(3),c=t(2),o=t(1),i=t(11),s=t(6),d=t(5),l=t.n(d),u=t(7),b=t(8),j=t(10),p=t(32);function h(){return(h=Object(u.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.token,r=n.id,e.prev=1,e.next=4,Object(p.a)("/api/orders/".concat(r),t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}var x=function(e){return h.apply(this,arguments)};var f,O,g,v,m,w,k,S,y,P=t(132),D=t(138),L=t(136),R=t(148),A=t(149),T=t(33),z=t(0),I=c.b.main(f||(f=Object(a.a)(["\n  padding: 65px 5px;\n  min-height: 100vh;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n  background: ",";\n  &:before {\n    display: ",';\n    position: absolute;\n    content: " ";\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: #ffffff57;\n    z-index: 400;\n  }\n  & > '," {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0 0 -60px;\n  }\n"])),(function(e){return e.theme.lightYellow}),(function(e){return e.isLoading?"block":"none"}),T.a),C=c.b.thead(O||(O=Object(a.a)(["\n  background-color: ",";\n  color: ",';\n  & > tr th {\n    padding: 10px 0;\n    font-family: "Oswald", sans-serif;\n    font-size: 19px;\n  }\n'])),(function(e){return e.theme.black}),(function(e){return e.theme.darckYellow})),B=c.b.div(g||(g=Object(a.a)(["\n  max-width: 900px;\n  margin: 0 auto 40px;\n  overflow-x: scroll;\n"]))),N=c.b.table(v||(v=Object(a.a)(["\n  width: 900px;\n  margin: 20px auto 0;\n  border-spacing: 10px;\n  border-collapse: collapse;\n  border: 2px solid ",";\n  box-shadow: ",";\n  text-transform: capitalize;\n  & > tbody {\n    background: #fff;\n  }\n  & > tbody td span + span {\n    margin-right: 5px;\n  }\n  & > tbody td {\n    padding: 10px 0;\n    cursor: pointer;\n  }\n  & > tbody tr {\n    border-bottom: 1px solid;\n  }\n"])),(function(e){return e.theme.black}),(function(e){return e.theme.lihgtBoxShadow})),F=c.b.button(m||(m=Object(a.a)(['\n  padding: 8px 5px;\n  cursor: pointer;\n  outline: none;\n  margin: 5px;\n  border-radius: 10px 5px;\n  border: none;\n  font-family: "Oswald", sans-serif;\n  transition: all 0.5s;\n  opacity: ',";\n  &:hover {\n    background: ",";\n  }\n"])),(function(e){return e.disabled?"0.4":"1"}),(function(e){return e.disabled?"unset":"#cdc8c8"})),M=c.b.div(w||(w=Object(a.a)(["\n  padding: 30px 0;\n  & > h3 {\n    margin-bottom: 40px;\n  }\n  @media screen and (max-width: 450px) {\n    font-size: 25px;\n  }\n  & > "," {\n    padding: 15px 30px;\n  }\n"])),P.b),E=c.b.h2(k||(k=Object(a.a)(["\n  font-size: 50px;\n"]))),V=c.b.div(S||(S=Object(a.a)(["\n  cursor: pointer;\n  padding: 0 10px;\n  align-items: center;\n  border-radius: 5px;\n  height: 40px;\n  box-shadow: ",";\n  background: ",";\n\n  margin: -46px 0 10px auto;\n  width: max-content;\n  display: flex;\n  transform: scale(0.7);\n  transition: all 0.3s ease;\n  &:hover {\n    transform: scale(0.75);\n  }\n"])),(function(e){return e.theme.lihgtBoxShadow}),(function(e){return e.theme.black})),U=c.b.img(y||(y=Object(a.a)(["\n  height: 50%;\n  cursor: pointer;\n"])));function _(e){var n=function(e){var n=e.setNotification,t=Object(b.g)(),r=Object(j.a)(),a=r.token,c=r.setIsLoading,i=r.currentUser,d=function(){var e=Object(u.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),n.target.disabled){e.next=6;break}return g(!0),e.next=5,x({token:a,id:t});case 5:V();case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),p=new URLSearchParams,h=Object(o.useState)(!1),f=Object(s.a)(h,2),O=f[0],g=f[1],v=Object(o.useState)(1),m=Object(s.a)(v,2),w=m[0],k=m[1],S=Object(o.useState)(1),y=Object(s.a)(S,2),P=y[0],D=y[1],L=Object(o.useState)([]),R=Object(s.a)(L,2),A=R[0],T=R[1],z=Object(o.useState)(!0),I=Object(s.a)(z,2),C=I[0],B=I[1],N=Object(o.useState)(0),F=Object(s.a)(N,2),M=F[0],E=F[1];p.append("page",w),p.append("limit",5),p.append("sort","-createdAt"),Object(o.useEffect)((function(){n(0);var e=new AbortController,t=e.signal;return function(){var e=Object(u.a)(l.a.mark((function e(){var n,r,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,(n=new Headers).append("Accept","application/json"),n.append("Authorization","Bearer ".concat(a)),r={method:"GET",headers:n,signal:t},e.next=8,fetch("/api/orders/user/".concat(i._id,"?").concat(p),r);case 8:return c=e.sent,e.next=11,c.json();case 11:o=e.sent,T(o.data),s=parseInt(o.total),D(Math.ceil(s/5)),document.querySelector("body").scrollTo(0,60),B(!1),g(!1),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log("Fetch Canseled: caught abort"):console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(){return e.apply(this,arguments)}}()(),function(){e.abort()}}),[w,M]);var V=function(){E(Date.now()),k(1)};return{seeDetails:function(e){c(!0),t.push("/myAccount/myOrders/".concat(e))},handleRefresh:V,setPage:k,page:w,isLoading:O,maxPage:P,orders:A,isFirstRender:C,deleteOrder:d}}({setNotification:e.setNotification}),t=n.seeDetails,a=n.handleRefresh,c=n.setPage,d=n.page,p=n.isLoading,h=n.maxPage,f=n.orders,O=n.isFirstRender,g=n.deleteOrder;return Object(z.jsxs)(I,{isLoading:p,children:[p?Object(z.jsx)(T.a,{}):null,Object(z.jsx)(D.SectionTitle,{light:!0,children:"Mis Pedidos"}),Object(z.jsx)(V,{onClick:function(){return a()},children:Object(z.jsx)(U,{onClick:function(){return a()},src:A.a,title:"Refrescar P\xe1gina"})}),p&&O&&Object(z.jsx)(R.a,{}),!p&&!O&&0===(null===f||void 0===f?void 0:f.length)&&Object(z.jsxs)(M,{children:[Object(z.jsx)(E,{children:"\ud83d\udc69\ud83c\udffb\u200d\ud83c\udf73"}),Object(z.jsx)("h3",{children:"Ning\xfan pedido realizado, tienes hambre?"}),Object(z.jsx)(P.b,{small:!0,as:i.b,to:"/menu",children:"Ver Men\xfa"})]}),0!==(null===f||void 0===f?void 0:f.length)&&Object(z.jsx)(B,{children:Object(z.jsxs)(N,{children:[Object(z.jsx)(C,{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"N\xba de Pedido"}),Object(z.jsx)("th",{children:"Fecha"}),Object(z.jsx)("th",{children:"Direcci\xf3n"}),Object(z.jsx)("th",{children:"Total"}),Object(z.jsx)("th",{children:"Estado"}),Object(z.jsx)("th",{children:"Acciones"})]})}),Object(z.jsx)("tbody",{children:null===f||void 0===f?void 0:f.map((function(e){var n,a;return Object(z.jsxs)("tr",{onClick:function(n){return t(e._id)},children:[Object(z.jsx)("td",{children:null===e||void 0===e?void 0:e.orderID}),Object(z.jsxs)("td",{children:[Object(z.jsx)("span",{children:null===(n=new Date(null===e||void 0===e?void 0:e.states[0].date).toLocaleString())||void 0===n?void 0:n.split(" ")[0]}),Object(z.jsx)("br",{}),Object(z.jsx)("span",{children:null===(a=new Date(null===e||void 0===e?void 0:e.states[0].date).toLocaleString())||void 0===a?void 0:a.split(" ")[1]})]}),Object(z.jsx)("td",{children:e.client[0].address}),Object(z.jsxs)("td",{children:["$",null===e||void 0===e?void 0:e.total]}),Object(z.jsxs)("td",{children:[" ",Object(z.jsx)("b",{children:Object(r.a)(null===e||void 0===e?void 0:e.states).reverse().find((function(e){return!0===e.confirmed})).name})]}),Object(z.jsx)("td",{children:Object(z.jsx)(F,{disabled:!0===(null===e||void 0===e?void 0:e.states[1].confirmed),onClick:function(n){return g(n,e._id)},children:"Cancelar Pedido"})})]},null===e||void 0===e?void 0:e._id)}))})]})}),Object(z.jsx)(L.a,{setPage:c,page:d,maxPage:h})]})}},164:function(e,n,t){"use strict";t.r(n),t.d(n,"Page",(function(){return T})),t.d(n,"TableHead",(function(){return z})),t.d(n,"OrdersTable",(function(){return I})),t.d(n,"default",(function(){return C}));var r=t(57),a=t(3),c=t(2),o=t(63),i=t(5),s=t.n(i),d=t(7),l=t(6),u=t(8),b=t(1),j=t(10);var p=t(151),h=t(149),x=t(141),f=t(156),O=t(33),g=t(140),v=t(138),m=t(163),w=t(133),k=t(0);function S(e){var n=e.setStatePreferece,t=e.setPage,r=e.defaultValue;return Object(k.jsxs)(w.b,{defaultValue:r,name:"filterOrdersByState",onChange:function(e){return function(e){e.preventDefault(),t(1),n(e.target.value)}(e)},children:[Object(k.jsx)(w.a,{value:"all",children:"Todos"}),Object(k.jsx)(w.a,{value:"finish",children:"Liquidados"}),Object(k.jsx)(w.a,{value:"unfinish",children:"Pendientes"})]})}function y(e){var n=e.setSortPreferece,t=e.defaultValue;return Object(k.jsxs)(w.b,{defaultValue:t,name:"sortProductBy",onChange:function(e){return n(e.target.value)},children:[Object(k.jsx)(w.a,{value:"-createdAt",children:"M\xe1s recientes"}),Object(k.jsx)(w.a,{value:"createdAt",children:"M\xe1s antiguos"}),Object(k.jsx)(w.a,{value:"total",children:"Menor Monto"}),Object(k.jsx)(w.a,{value:"-total",children:"Mayor Monto"})]})}var P,D,L,R=t(136),A=t(148),T=c.b.section(P||(P=Object(a.a)(["\n  padding: 60px 05px;\n  min-height: 100vh;\n  width: 100%;\n  max-width: 1250px;\n  margin: 0 auto;\n  text-align: center;\n  &:before {\n    display: ",';\n    position: absolute;\n    content: " ";\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: #ffffff57;\n    z-index: 400;\n  }\n  & > '," {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0 0 -60px;\n  }\n  & > "," {\n    padding: 0 5px;\n  }\n  & > "," {\n    margin: 30px 5px 0;\n  }\n"])),(function(e){return e.isLoading?"block":"none"}),O.a,g.a,m.FiltersBoard),z=c.b.thead(D||(D=Object(a.a)(['\n  background-color: #171717;\n  color: #fcba1c;\n  & > tr th {\n    padding: 10px 0;\n    font-family: "Oswald", sans-serif;\n    font-size: 19px;\n  }\n']))),I=c.b.table(L||(L=Object(a.a)(["\n  width: 900px;\n  margin: 20px auto 0;\n  border-spacing: 10px;\n  border-collapse: collapse;\n  border: 2px solid #171717;\n  text-transform: capitalize;\n\n  & > tbody {\n    background: #fff;\n  }\n\n  & > tbody tr td {\n    padding: 10px 0;\n    cursor: pointer;\n  }\n  & > tbody tr {\n    border-bottom: 1px solid;\n  }\n  & > tbody tr td small {\n    margin-left: 5px;\n  }\n"])));function C(e){var n=function(e){var n,t,r=e.setNotification,a=Object(u.g)(),c=Object(u.h)(),i=Object(j.a)(),p=i.token,h=i.setIsLoading,x=Object(b.useState)(new URLSearchParams(c.search)),f=Object(l.a)(x,2),O=f[0],g=(f[1],Object(b.useState)("")),v=Object(l.a)(g,2),m=v[0],w=v[1],k=Object(b.useState)(!1),S=Object(l.a)(k,2),y=S[0],P=S[1],D=Object(b.useState)(1),L=Object(l.a)(D,2),R=L[0],A=L[1],T=Object(b.useState)(1),z=Object(l.a)(T,2),I=z[0],C=z[1],B=Object(b.useState)([]),N=Object(l.a)(B,2),F=N[0],M=N[1],E=Object(b.useState)("all"),V=Object(l.a)(E,2),U=V[0],_=V[1],H=Object(b.useState)("-createdAt"),q=Object(l.a)(H,2),Y=q[0],G=q[1],J=Object(b.useState)(!0),W=Object(l.a)(J,2),$=W[0],K=W[1],Q=Object(b.useState)(0),X=Object(l.a)(Q,2),Z=X[0],ee=X[1];return $?t=new URLSearchParams(O.toString()):((t=new URLSearchParams).append("sort",Y),t.append("page",R),t.append("limit",5)),Object(b.useEffect)((function(){""!==m&&(t.append("orderID",m),_("all")),"all"!==U&&t.append("state",U),A(1)}),[m,U,Y]),Object(b.useEffect)((function(){r(0);var e=new AbortController,n=e.signal;return function(){var e=Object(d.a)(s.a.mark((function e(){var r,c,o,i,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,(r=new Headers).append("Accept","application/json"),r.append("Authorization","Bearer ".concat(p)),c={method:"GET",headers:r,signal:n},e.next=8,fetch("/api/orders?".concat(t),c);case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,M(i.data),d=parseInt(i.total),C(Math.ceil(d/5)),a.push("/dashboard/orders?".concat(t)),document.querySelector("body").scrollTo(0,60),K(!1),P(!1),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log("Fetch Canseled: caught abort"):console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}()(),function(){e.abort()}}),[m,U,R,Y,Z]),n={seeDetails:function(e){h(!0),a.push("/dashboard/orders/".concat(e))},handleRefresh:function(){ee(Date.now()),A(1),G("-createdAt"),_("all")},setOrderID:w,setSorting:G,setState:_,setPage:A,page:R,isLoading:y,maxPage:I,orders:F,sorting:Y,isFirstRender:$,orderID:m},Object(o.a)(n,"sorting",Y),Object(o.a)(n,"state",U),n}({setNotification:e.setNotification}),t=n.seeDetails,a=n.handleRefresh,c=n.setOrderID,i=n.setSorting,w=n.setPage,P=n.setState,D=n.page,L=n.isLoading,C=n.maxPage,B=n.orders,N=n.sorting,F=n.isFirstRender,M=n.orderID,E=n.state;return Object(k.jsxs)(T,{isLoading:L,children:[Object(k.jsx)(p.a,{}),Object(k.jsx)(v.SectionTitle,{children:"Pedidos"}),Object(k.jsx)(x.a,{defaultValue:M,placeholder:"N\xfamero de orden...",setSearch:c}),Object(k.jsxs)(m.FiltersBoard,{children:[Object(k.jsx)(S,{defaultValue:E,setPage:w,setStatePreferece:P}),Object(k.jsx)(y,{defaultValue:N,setSortPreferece:i})]}),Object(k.jsx)(f.RefreshButton,{"data-testid":"refresh-button",onClick:function(){return a()},children:Object(k.jsx)(f.RefreshIcone,{src:h.a,title:"Refrescar P\xe1gina"})}),L?Object(k.jsx)(O.a,{}):null,L&&F&&Object(k.jsx)(A.a,{}),!L&&!F&&0===(null===B||void 0===B?void 0:B.length)&&Object(k.jsx)(g.a,{children:"No se han encontrado coincidencias, intenta de nuevo!!"}),0!==(null===B||void 0===B?void 0:B.length)&&Object(k.jsx)(f.TableWrapper,{children:Object(k.jsxs)(I,{children:[Object(k.jsx)(z,{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"N\xba de Pedido"}),Object(k.jsx)("th",{children:"Fecha"}),Object(k.jsx)("th",{children:"Direcci\xf3n"}),Object(k.jsx)("th",{children:"Total"}),Object(k.jsx)("th",{children:"Estado"})]})}),Object(k.jsx)("tbody",{children:null===B||void 0===B?void 0:B.map((function(e){return Object(k.jsxs)("tr",{onClick:function(n){return t(null===e||void 0===e?void 0:e._id)},children:[Object(k.jsx)("td",{children:null===e||void 0===e?void 0:e.orderID}),Object(k.jsxs)("td",{children:[Object(k.jsx)("span",{children:new Date(e.states[0].date).toLocaleString().split(" ")[0]}),Object(k.jsx)("br",{}),Object(k.jsx)("span",{children:new Date(e.states[0].date).toLocaleString().split(" ")[1]})]}),Object(k.jsx)("td",{children:null===e||void 0===e?void 0:e.client[0].address}),Object(k.jsxs)("td",{children:["$",null===e||void 0===e?void 0:e.total]}),Object(k.jsxs)("td",{children:[" ",Object(k.jsx)("b",{children:Object(r.a)(null===e||void 0===e?void 0:e.states).reverse().find((function(e){return!0===e.confirmed})).name})]})]},null===e||void 0===e?void 0:e.orderID)}))})]})}),Object(k.jsx)(R.a,{setPage:w,page:D,maxPage:C})]})}}}]);
//# sourceMappingURL=15.d39dfb6d.chunk.js.map